#!/bin/bash

if test "$LIMESTONE_PGSQL_DB_PORT" = ""; then
    export LIMESTONE_PGSQL_DB_PORT=5432;
fi

psql -h $LIMESTONE_PGSQL_DB_HOST -p $LIMESTONE_PGSQL_DB_PORT $LIMESTONE_PGSQL_DB_NAME -U$LIMESTONE_PGSQL_DB_USER -c "DROP SCHEMA $LIMESTONE_PGSQL_DB_USER CASCADE;" 2>/dev/null

psql -h $LIMESTONE_PGSQL_DB_HOST -p $LIMESTONE_PGSQL_DB_PORT $LIMESTONE_PGSQL_DB_NAME -U$LIMESTONE_PGSQL_DB_USER -c "CREATE SCHEMA $LIMESTONE_PGSQL_DB_USER;"

psql -h $LIMESTONE_PGSQL_DB_HOST -p $LIMESTONE_PGSQL_DB_PORT $LIMESTONE_PGSQL_DB_NAME -U$LIMESTONE_PGSQL_DB_USER -f create_postgres_full.sql > /dev/null
